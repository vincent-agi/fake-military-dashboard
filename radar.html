<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Tactical Radar</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
    background:#020617;
    overflow:hidden;
}

#crt::after {
    content:"";
    position:absolute;
    inset:0;
    background:
      repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,0.15),
        rgba(0,0,0,0.15) 1px,
        rgba(0,0,0,0) 2px,
        rgba(0,0,0,0) 4px
      );
    pointer-events:none;
    mix-blend-mode: overlay;
}
</style>
</head>

<body class="flex items-center justify-center min-h-screen">

<div id="crt" class="relative">

<canvas id="radar" width="700" height="700" class="rounded-full shadow-2xl shadow-green-500"></canvas>

<div class="absolute top-4 left-4 text-green-400 text-xs font-mono space-y-1">
    <div>MODE : TRACKING</div>
    <div>SCAN : ACTIVE</div>
    <div id="readout">TARGET : NONE</div>
</div>

</div>

<script>
const canvas = document.getElementById("radar");
const ctx = canvas.getContext("2d");

const W = canvas.width;
const H = canvas.height;
const cx = W/2;
const cy = H/2;
const R = W/2 - 20;

let angle = 0;

const targets = Array.from({length:12},()=>({
    r: Math.random()*R,
    a: Math.random()*Math.PI*2,
    vr:(Math.random()-0.5)*0.3,
    va:(Math.random()-0.5)*0.005,
    strength: Math.random()*0.5+0.5,
    locked:false
}));

function fade(){
    ctx.fillStyle="rgba(2,6,23,0.25)";
    ctx.fillRect(0,0,W,H);
}

function grid(){
    ctx.strokeStyle="rgba(34,197,94,0.15)";
    for(let i=1;i<=4;i++){
        ctx.beginPath();
        ctx.arc(cx,cy,(R/4)*i,0,Math.PI*2);
        ctx.stroke();
    }
    for(let i=0;i<12;i++){
        const a=i*Math.PI*2/12;
        ctx.beginPath();
        ctx.moveTo(cx,cy);
        ctx.lineTo(cx+Math.cos(a)*R, cy+Math.sin(a)*R);
        ctx.stroke();
    }
}

function drawTargets(){
    let lockedTarget=null;

    targets.forEach(t=>{
        t.r+=t.vr;
        t.a+=t.va;

        if(t.r<20||t.r>R) t.vr*=-1;

        const x=cx+Math.cos(t.a)*t.r;
        const y=cy+Math.sin(t.a)*t.r;

        const diff=Math.abs(t.a-angle);
        t.locked=diff<0.03;

        if(t.locked) lockedTarget=t;

        ctx.fillStyle=t.locked?"rgba(0,255,255,1)":"rgba(34,197,94,"+t.strength+")";
        ctx.beginPath();
        ctx.arc(x,y,5,0,Math.PI*2);
        ctx.fill();

        if(t.locked){
            ctx.strokeStyle="rgba(0,255,255,0.8)";
            ctx.beginPath();
            ctx.arc(x,y,12,0,Math.PI*2);
            ctx.stroke();
        }
    });

    if(lockedTarget){
        const deg=((lockedTarget.a*180/Math.PI)+360)%360;
        const dist=Math.floor((lockedTarget.r/R)*100);
        document.getElementById("readout").innerText=`TARGET : ${deg.toFixed(1)}Â°  ${dist}%`;
    } else {
        document.getElementById("readout").innerText="TARGET : NONE";
    }
}

function sweep(){
    const grad=ctx.createRadialGradient(cx,cy,0,cx,cy,R);
    grad.addColorStop(0,"rgba(34,197,94,0.15)");
    grad.addColorStop(1,"rgba(34,197,94,0)");
    ctx.fillStyle=grad;

    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,R,angle-0.4,angle);
    ctx.fill();

    ctx.strokeStyle="rgba(34,197,94,0.9)";
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.lineTo(cx+Math.cos(angle)*R, cy+Math.sin(angle)*R);
    ctx.stroke();

    angle+=0.01;
}

function noise(){
    const img=ctx.getImageData(0,0,W,H);
    for(let i=0;i<img.data.length;i+=4){
        if(Math.random()<0.02){
            img.data[i]=255;
            img.data[i+1]=255;
            img.data[i+2]=255;
        }
    }
    ctx.putImageData(img,0,0);
}

function loop(){
    fade();
    grid();
    drawTargets();
    sweep();
    noise();
    requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
